---
layout: post
title: 修改SSH端口与端口分配规则分类
date: 2019-06-05 23:11:54
tags:
  - linux
  - ssh
---

## 修改SSH默认端口
> 打开 `vi /etc/ssh/sshd_config`

> `Port 22` 修改22端口号为自己的 1098

> 保存重启 `service sshd restart`

> 修改防火墙了 阿里云服务器，可以到安全组配置里增加相应端口：**端口范围1098/1098**

> 测试

```
# 使用root账户、默认的22端口登录
ssh IP

# 使用test账户、默认的22端口登录
ssh test@IP

# 使用test账户、自定义的1098端口登录
ssh -p 1098 test@IP
```

## 端口分配规则分类

TCP/IP 协议中的端口在报头中占2个字节即16位，范围是从0-65535。端口号用来表示和区别网络中的不同应用程序 

1. 公认端口（Well Known Ports）：0-1023之间的端口号。这些端口由 IANA 分配管理。IANA 把这些端口分配给最重要的一些应用程序，让所有的用户都知道，当一种新的应用程序出现后，IANA必须为它指派一个公认端口。

> 常用的公认端口有： 
* FTP : 21 
* TELNET : 23 
* SMTP : 25 
* DNS : 53 
* TFTP : 69 
* HTTP : 80 
* SNMP : 161 

2. 注册端口（Registered Ports）：从1024-49151。是公司和其他用户向互联网名称与数字地址分配机构（ICANN）登记的端口号，利用因特网的传输控制协议（TCP）和用户数据报协议（UDP）进行通信的应用软件需要使用这些端口。在大多数情况下，这些应用软件和普通程序一样可以被非特权用户打开。 
3. 客户端使用的端口号：49152~65535.这类端口号仅在客户进程运行时才动态选择，因此又叫做短暂端口号。被保留给客户端进程选择暂时使用的。也可以理解为，客户端启动的时候操作系统随机分配一个端口用来和服务器通信，客户端进程关闭下次打开时，又重新分配一个新的端口

> 我们一般是使用1024-49151







